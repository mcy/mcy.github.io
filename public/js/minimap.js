document.addEventListener("DOMContentLoaded",()=>{function e(){let e=window.pageYOffset/(document.body.clientHeight-window.innerHeight);return e>1?1:e}function t(){let t=document.body.clientHeight*c-window.innerHeight;t>0?(t*=e(),u.style.top=`-${t}px`):u.style.top="0px"}function n(){let e=document.body.clientWidth,n=document.body.clientHeight/e,i=window.innerHeight/window.innerWidth;r.style.width=document.body.clientWidth*s+"px";let d=document.getElementsByClassName("sidebar")[0].clientWidth,o=document.getElementsByClassName("sidebar")[0].clientWidth,l=window.innerWidth-d-o;r.style.right=`calc((29rem - ${l}px) * ${c})`,m.style.right=`-${d*c*2}px`,c=r.clientWidth/e,a.style.paddingTop=100*n+"%",m.style.paddingTop=100*i+"%",u.style.width=100/c+"%",u.style.height=100/c+"%",u.style.transform=`scale(${c})`,t()}function i(e){e.preventDefault(),g=!0,w=e.touches?e.touches[0].clientX:e.clientX,h=e.touches?e.touches[0].clientY:e.clientY;let t=(w-r.offsetLeft-m.clientWidth/2)/c,n=h/window.innerHeight*document.body.clientHeight;window.scrollTo(t,n)}function d(e){if(!g)return;e.preventDefault();let n=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;window.scrollBy((n-w)/c,(i-h)/window.innerHeight*document.body.clientHeight),w=n,h=i,t()}function o(){g=!1}function l(e){e.target===document.body&&(g=!1)}let s=.15,c=s,a=document.getElementsByClassName("minimap-size")[0],m=document.getElementsByClassName("minimap-controller")[0],u=document.getElementsByClassName("minimap-content")[0],r=document.getElementsByClassName("minimap")[0];if(!r)return;n(),window.addEventListener("resize",n),window.addEventListener("load",n),window.addEventListener("scroll",()=>{let n=window.pageXOffset*c,i=(window.pageYOffset,document.body.clientHeight,window.innerHeight,e()*(window.innerHeight-m.clientHeight));m.style.transform=`translate(${n}px, ${i}px)`,t()});let w=0,h=0,g=0;r.addEventListener("mousedown",i),r.addEventListener("touchdown",i),window.addEventListener("mousemove",d),window.addEventListener("touchmove",d),window.addEventListener("mouseup",o),window.addEventListener("touchend",o),document.body.addEventListener("mouseleave",l),document.body.addEventListener("touchleave",l)},!1);